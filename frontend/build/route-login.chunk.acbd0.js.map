{"version":3,"sources":["webpack:///../node_modules/storeon/preact/index.js","webpack:///../src/index.js","webpack:///../node_modules/storeon/preact/context.js","webpack:///../node_modules/@storeon/localstorage/index.js","webpack:///../node_modules/storeon/index.js","webpack:///./storages/login/index.js","webpack:///./components/forms/login/index.js","webpack:///./routes/login/index.js"],"names":["hooks","require","StoreContext","useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","module","exports","keys","slice","call","arguments","store","useContext","rerender","useState","on","_","changed","some","key","useMemo","state","get","data","forEach","dispatch","getHookState","index","options","_hook","currentComponent","__hooks","_list","_pendingEffects","length","push","initialState","useReducer","invokeOrReturn","reducer","init","hookState","currentIndex","_component","_value","nextValue","action","setState","callback","args","argsChanged","_args","_renderCallbacks","useRef","initialValue","current","useImperativeHandle","ref","createHandle","concat","factory","_factory","useCallback","context","provider","_id","_defaultValue","sub","props","value","useDebugValue","formatter","flushAfterPaintEffects","afterPaintEffects","component","_parentDom","invokeCleanup","invokeEffect","hook","_cleanup","result","oldArgs","newArgs","arg","f","prevRaf","oldBeforeRender","_render","oldAfterDiff","diffed","oldCommit","_commit","oldBeforeUnmount","unmount","vnode","c","requestAnimationFrame","raf","done","clearTimeout","timeout","cancelAnimationFrame","setTimeout","commitQueue","filter","cb","Preact","createContext","paths","config","initialized","savedState","localStorage","getItem","JSON","parse","err","stateToStore","p","saveState","stringify","setItem","modules","events","event","changes","i","diff","then","LoginStore","createStore","email","persistState","LoginForm","useStoreon","class","style","form","type","onInput","e","target","Login","Provider","login"],"mappings":"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","file":"route-login.chunk.acbd0.js","sourcesContent":["var hooks = require('preact/hooks')\n\nvar StoreContext = require('./context')\n\nvar useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' ? hooks.useLayoutEffect : hooks.useEffect\n\nmodule.exports = function () {\n  var keys = [].slice.call(arguments)\n\n  var store = hooks.useContext(StoreContext)\n  if (process.env.NODE_ENV !== 'production' && !store) {\n    throw new Error(\n      'Could not find storeon context value.' +\n      'Please ensure the component is wrapped in a <StoreContext.Provider>'\n    )\n  }\n\n  var rerender = hooks.useState({ })\n\n  useIsomorphicLayoutEffect(function () {\n    return store.on('@changed', function (_, changed) {\n      var changesInKeys = keys.some(function (key) {\n        return key in changed\n      })\n      if (changesInKeys) rerender[1]({ })\n    })\n  }, [])\n\n  return hooks.useMemo(function () {\n    var state = store.get()\n    var data = { }\n    keys.forEach(function (key) {\n      data[key] = state[key]\n    })\n    data.dispatch = store.dispatch\n    return data\n  }, [rerender[0]])\n}\n","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tif (currentComponent.__hooks) {\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\tcurrentComponent.__hooks._pendingEffects = [];\n\t}\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\tif (hooks._pendingEffects.length) {\n\t\t\tafterPaint(afterPaintEffects.push(c));\n\t\t}\n\t}\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t);\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\thooks._list.forEach(hook => hook._cleanup && hook._cleanup());\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @returns {import('./internal').HookState}\n */\nfunction getHookState(index) {\n\tif (options._hook) options._hook(currentComponent);\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = { _list: [], _pendingEffects: [] });\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} initialState\n */\nexport function useState(initialState) {\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++);\n\tif (!hookState._component) {\n\t\thookState._component = currentComponent;\n\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst nextValue = reducer(hookState._value[0], action);\n\t\t\t\tif (hookState._value[0] !== nextValue) {\n\t\t\t\t\thookState._value[0] = nextValue;\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\treturn hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref === 'function') ref(createHandle());\n\t\t\telse if (ref) ref.current = createHandle();\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t\treturn (state._value = factory());\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\tif (!provider) return context._defaultValue;\n\tconst state = getHookState(currentIndex++);\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tafterPaintEffects.some(component => {\n\t\tif (component._parentDom) {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t}\n\t});\n\tafterPaintEffects = [];\n}\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tcancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (typeof window !== 'undefined') {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\n\t\t/* istanbul ignore next */\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\tif (hook._cleanup) hook._cleanup();\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\tconst result = hook._value();\n\tif (typeof result === 'function') hook._cleanup = result;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn !oldArgs || newArgs.some((arg, index) => arg !== oldArgs[index]);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f === 'function' ? f(arg) : f;\n}\n","var Preact = require('preact')\n\nmodule.exports = Preact.createContext()\n","/**\n * Storeon module to persist state to local storage\n *\n * @param {String[]} paths The keys of state object\n *    that will be store in local storage\n * @param {Object} config The config object\n * @param {String} [config.key='storeon'] The default key\n *    to use in local storage\n */\nvar persistState = function (paths, config) {\n  config = config || { }\n  paths = paths || []\n\n  var key = config.key || 'storeon'\n\n  return function (store) {\n    var initialized = false\n\n    store.on('@init', function () {\n      initialized = true\n\n      try {\n        var savedState = localStorage.getItem(key)\n        if (savedState !== null) {\n          return JSON.parse(savedState)\n        }\n      } catch (err) { }\n    })\n    store.on('@dispatch', function (state) {\n      if (!initialized) {\n        return\n      }\n\n      var stateToStore = { }\n      if (paths.length === 0) {\n        stateToStore = state\n      } else {\n        paths.forEach(function (p) {\n          stateToStore[p] = state[p]\n        })\n      }\n\n      try {\n        var saveState = JSON.stringify(stateToStore)\n        localStorage.setItem(key, saveState)\n      } catch (err) { }\n    })\n  }\n}\n\nmodule.exports = persistState\n","/**\n * Initialize new store and apply all modules to the store.\n *\n * @param {moduleInitializer[]} modules Functions which will set initial state\n *                                      define reducer and subscribe\n *                                      to all system events.\n *\n * @return {Store} The new store.\n *\n * @example\n * import createStore from 'storeon'\n * let increment = store => {\n *   store.on('@init', () => ({ count: 0 }))\n *   store.on('inc', ({ count }) => ({ count: count + 1 }))\n * }\n * const store = createStore([increment])\n * store.get().count //=> 0\n * store.dispatch('inc')\n * store.get().count //=> 1\n */\nvar createStore = function (modules) {\n  var events = { }\n  var state = { }\n\n  var on = function (event, cb) {\n    (events[event] || (events[event] = [])).push(cb)\n\n    return function () {\n      events[event] = events[event].filter(function (i) {\n        return i !== cb\n      })\n    }\n  }\n\n  var dispatch = function (event, data) {\n    if (event !== '@dispatch') {\n      dispatch('@dispatch', [event, data, events[event]])\n    }\n\n    if (events[event]) {\n      var changes = { }\n      var changed\n      events[event].forEach(function (i) {\n        var diff = i(state, data)\n        if (diff && typeof diff.then !== 'function') {\n          changed = state = Object.assign({ }, state, diff)\n          Object.assign(changes, diff)\n        }\n      })\n      if (changed) dispatch('@changed', changes)\n    }\n  }\n\n  var get = function () {\n    return state\n  }\n\n  var store = { dispatch: dispatch, get: get, on: on }\n\n  modules.forEach(function (i) {\n    if (i) i(store)\n  })\n  dispatch('@init')\n\n  return store\n}\n\nmodule.exports = createStore\n\n/**\n * Store with application state and event listeners.\n *\n * @name Store\n * @class\n */\n/**\n * Return current state. You can use this method only to read state.\n * Any state changes should be in event listeners.\n *\n * @return {object} The current state.\n *\n * @name get\n * @function\n * @memberof Store#\n */\n/**\n * Emit event.\n *\n * @param {string} event The event name.\n * @param {*} [data] Any additional data for the event.\n *\n * @return {object} The current state.\n *\n * @name dispatch\n * @function\n * @memberof Store#\n */\n/**\n * Add event listener.\n *\n * @param {string} event The event name.\n * @param {listener} listener The event listener.\n *\n * @return {function} The function to remove listener.\n *\n * @name on\n * @function\n * @memberof Store#\n */\n\n/**\n * @callback moduleInitializer\n * @param {Store} store Store to define initial state and reducers.\n */\n\n/**\n * @callback listener\n * @param {object} state The current state of the store.\n * @param {*} [data] The event data if it was passed.\n * @return {object|undefined} Changes for next state.\n */\n","import createStore from \"storeon\";\nimport persistState from \"@storeon/localstorage\";\n\n//\nlet store = store => {\n  store.on(\"@init\", () => ({ email: \"\" }));\n  store.on(\"login/pre-save/email\", (state, email) => ({ email: email }));\n};\n\nconst LoginStore = createStore([store, persistState([\"email\"])]);\n\nexport default LoginStore;\n","import { h } from \"preact\";\nimport useStoreon from \"storeon/preact\";\n\n// Style\nimport style from \"./style\";\n\nconst LoginForm = () => {\n  const { dispatch, email } = useStoreon(\"email\");\n\n  return (\n    <div class={style.form}>\n      <label>Email</label>\n      <input\n        type=\"text\"\n        value={email}\n        onInput={e => {\n          dispatch(\"login/pre-save/email\", e.target.value);\n        }}\n      />\n      {email}\n    </div>\n  );\n};\n\nexport default LoginForm;\n","import { h } from \"preact\";\nimport StoreContext from \"storeon/preact/context\";\n\n// Init store\nimport LoginStore from \"../../storages/login\";\n\n// UI Component\nimport LoginForm from \"../../components/forms/login\";\n\n// Style\nimport style from \"./style\";\n\nconst Login = () => {\n  return (\n    <StoreContext.Provider value={LoginStore}>\n      <div class={style.login}>\n        <h2>Login</h2>\n        <p>This is the Login component.</p>\n        <LoginForm />\n      </div>\n    </StoreContext.Provider>\n  );\n};\n\nexport default Login;\n"],"sourceRoot":""}